name: Railway Warmup Ping

on:
  schedule:
    - cron: '*/5 * * * *'  # 5분마다
  workflow_dispatch:        # 수동 실행 가능

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Railway backend
        run: |
          STATUS=$(curl -s -o /dev/null -w "%{http_code}" https://recflix-production.up.railway.app/health)
          echo "Health check status: $STATUS"
          if [ "$STATUS" != "200" ]; then
            echo "WARNING: Backend returned $STATUS"
          fi
